/* ===================================
   Responsive Styles for iPad
   =================================== */

/* ===================================
   Small iPad / iPad Mini (Portrait)
   768px - 834px
   =================================== */

@media screen and (min-width: 768px) and (max-width: 834px) and (orientation: portrait) {
    :root {
        --font-size-base: 18px;
        --spacing-md: 24px;
        --spacing-lg: 32px;
    }
    
    .upload-box {
        padding: var(--spacing-lg);
        max-width: 600px;
    }
    
    .viewer {
        padding: var(--spacing-lg) var(--spacing-md);
    }
    
    #viewer > div {
        max-width: 650px;
    }
}

/* ===================================
   Standard iPad (Portrait)
   834px - 1024px
   =================================== */

@media screen and (min-width: 834px) and (max-width: 1024px) and (orientation: portrait) {
    :root {
        --font-size-base: 19px;
        --spacing-md: 28px;
        --spacing-lg: 40px;
    }
    
    .upload-box {
        padding: var(--spacing-xl);
        max-width: 650px;
    }
    
    .viewer {
        padding: var(--spacing-xl) var(--spacing-lg);
    }
    
    #viewer > div {
        max-width: 700px;
    }
}

/* ===================================
   iPad Landscape Mode
   =================================== */

@media screen and (min-width: 1024px) and (orientation: landscape) {
    :root {
        --font-size-base: 18px;
        --spacing-lg: 48px;
    }
    
    .upload-container {
        padding: var(--spacing-lg);
    }
    
    .upload-box {
        max-width: 700px;
        padding: var(--spacing-xl);
    }
    
    .viewer {
        padding: var(--spacing-xl) var(--spacing-lg);
        padding-bottom: calc(var(--nav-height) + var(--spacing-xl));
    }
    
    #viewer > div {
        max-width: 800px;
    }
    
    /* Larger touch zones in landscape */
    .viewer::before,
    .viewer::after {
        width: 25%;
    }
}

/* ===================================
   iPad Pro 11" (Portrait)
   834px
   =================================== */

@media screen and (min-width: 834px) and (max-width: 834px) and (orientation: portrait) {
    :root {
        --font-size-base: 19px;
    }
    
    #viewer > div {
        max-width: 700px;
    }
}

/* ===================================
   iPad Pro 11" (Landscape)
   1194px
   =================================== */

@media screen and (min-width: 1194px) and (orientation: landscape) {
    :root {
        --font-size-base: 19px;
    }
    
    #viewer > div {
        max-width: 850px;
    }
}

/* ===================================
   iPad Pro 12.9" (Portrait)
   1024px
   =================================== */

@media screen and (min-width: 1024px) and (max-width: 1024px) and (orientation: portrait) {
    :root {
        --font-size-base: 20px;
        --spacing-lg: 48px;
    }
    
    .upload-box {
        max-width: 750px;
    }
    
    #viewer > div {
        max-width: 750px;
    }
}

/* ===================================
   iPad Pro 12.9" (Landscape)
   1366px
   =================================== */

@media screen and (min-width: 1366px) and (orientation: landscape) {
    :root {
        --font-size-base: 20px;
        --spacing-xl: 64px;
    }
    
    .upload-box {
        max-width: 800px;
    }
    
    #viewer > div {
        max-width: 900px;
    }
    
    .viewer {
        padding: var(--spacing-xl);
    }
}

/* ===================================
   Touch Target Optimizations
   =================================== */

/* Ensure all touch targets meet minimum size */
@media (pointer: coarse) {
    button,
    .file-input-label {
        min-height: var(--touch-target-min);
        min-width: var(--touch-target-min);
    }
    
    .nav-btn {
        min-width: 56px;
        min-height: 56px;
    }
    
    .back-btn {
        padding: 12px 16px;
        min-height: var(--touch-target-min);
    }
}

/* ===================================
   High DPI / Retina Displays
   =================================== */

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    /* Optimize text rendering for high DPI */
    body {
        -webkit-font-smoothing: subpixel-antialiased;
    }
    
    /* Sharper borders */
    .nav-controls {
        border-top-width: 0.5px;
    }
}

/* ===================================
   Reduced Motion
   =================================== */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    .viewer {
        scroll-behavior: auto;
    }
}

/* ===================================
   Dark Mode Support (Future)
   =================================== */

@media (prefers-color-scheme: dark) {
    /* Keep light theme for MVP */
    /* Future enhancement: implement dark mode variables */
}

/* ===================================
   Orientation-Specific Adjustments
   =================================== */

/* Portrait Mode - Optimize for vertical reading */
@media (orientation: portrait) {
    .viewer {
        padding-bottom: calc(var(--nav-height) + var(--spacing-lg));
    }
    
    .nav-controls {
        padding: var(--spacing-sm) var(--spacing-lg);
    }
    
    /* Slightly narrower touch zones in portrait */
    .viewer::before,
    .viewer::after {
        width: 30%;
    }
}

/* Landscape Mode - Optimize for horizontal space */
@media (orientation: landscape) {
    .upload-container {
        padding: var(--spacing-md) var(--spacing-lg);
    }
    
    .viewer {
        padding: var(--spacing-md) var(--spacing-xl);
    }
    
    /* Adjust nav controls spacing */
    .nav-controls {
        padding: var(--spacing-sm) var(--spacing-xl);
    }
}

/* ===================================
   Safe Area Insets (Notch Support)
   =================================== */

@supports (padding: max(0px)) {
    .viewer {
        padding-left: max(var(--spacing-md), env(safe-area-inset-left));
        padding-right: max(var(--spacing-md), env(safe-area-inset-right));
        padding-bottom: max(calc(var(--nav-height) + var(--spacing-lg)), env(safe-area-inset-bottom));
    }
    
    .nav-controls {
        padding-left: max(var(--spacing-md), env(safe-area-inset-left));
        padding-right: max(var(--spacing-md), env(safe-area-inset-right));
        padding-bottom: env(safe-area-inset-bottom);
    }
    
    .back-btn {
        top: max(var(--spacing-sm), env(safe-area-inset-top));
        left: max(var(--spacing-sm), env(safe-area-inset-left));
    }
}

/* ===================================
   Print Styles (Bonus)
   =================================== */

@media print {
    .nav-controls,
    .back-btn,
    .upload-container,
    .loading-container,
    .error-container {
        display: none !important;
    }
    
    .viewer {
        padding: 0;
        overflow: visible;
    }
    
    #viewer > div {
        max-width: 100%;
    }
    
    .viewer::before,
    .viewer::after {
        display: none;
    }
}

/* ===================================
   Accessibility Enhancements
   =================================== */

/* Focus visible for keyboard navigation */
@media (prefers-reduced-motion: no-preference) {
    button:focus-visible {
        outline: 3px solid var(--primary-color);
        outline-offset: 2px;
    }
}

/* Increase contrast for better readability */
@media (prefers-contrast: high) {
    :root {
        --text-primary: #000000;
        --text-secondary: #424242;
        --border: #bdbdbd;
    }
    
    .nav-btn {
        border: 2px solid var(--text-primary);
    }
}

/* ===================================
   Small Screen Fallback (Phone)
   =================================== */

@media screen and (max-width: 767px) {
    :root {
        --font-size-base: 16px;
        --spacing-md: 16px;
        --spacing-lg: 24px;
    }
    
    .upload-box {
        padding: var(--spacing-md);
    }
    
    .viewer {
        padding: var(--spacing-md);
        padding-bottom: calc(var(--nav-height) + var(--spacing-md));
    }
    
    #viewer > div {
        max-width: 100%;
    }
    
    .nav-controls {
        padding: var(--spacing-xs) var(--spacing-sm);
    }
    
    .back-btn {
        font-size: 12px;
        padding: 8px 12px;
    }
    
    .back-btn span {
        display: none;
    }
}